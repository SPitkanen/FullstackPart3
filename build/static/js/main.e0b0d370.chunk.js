(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n.n(c),i=n(15),r=n.n(i),u=(n(20),n(3)),a=n(4),s=n.n(a),l="/api/persons",j=function(){return s.a.get(l).then((function(e){return e.data}))},d=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e,t){return s.a.put("".concat(l,"/").concat(e),t).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},h=n(0),m=function(e){var t=e.message;return null===t?null:Object(h.jsx)("div",{className:"error",children:t})},O=function(e){var t=e.person,n=e.action;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{children:[t.name,", ",t.number]}),Object(h.jsx)("button",{onClick:function(){return n(t)},children:"Remove"})]})},v=function(e){return Object(h.jsx)("div",{children:e.persons.filter((function(t){return t.name.toLowerCase().includes(e.filter.toLowerCase())||t.number.includes(e.filter.toLowerCase())})).map((function(t){return Object(h.jsx)(O,{person:t,action:e.action},t.name)}))})},p=function(e){return Object(h.jsx)("div",{children:Object(h.jsx)("form",{children:Object(h.jsxs)("div",{children:["Filter with ",Object(h.jsx)("input",{value:e.filter,onChange:e.change})]})})})},x=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:e.addPerson,children:[Object(h.jsxs)("div",{children:["Name: ",Object(h.jsx)("input",{value:e.name,onChange:e.handleName})]}),Object(h.jsxs)("div",{children:["Number: ",Object(h.jsx)("input",{value:e.number,onChange:e.handleNumber})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})})},g=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(""),r=Object(u.a)(i,2),a=r[0],s=r[1],l=Object(c.useState)(""),O=Object(u.a)(l,2),g=O[0],y=O[1],w=Object(c.useState)(""),N=Object(u.a)(w,2),C=N[0],S=N[1],k=Object(c.useState)(null),L=Object(u.a)(k,2),P=L[0],A=L[1];Object(c.useEffect)((function(){j().then((function(e){o(e)}))}),[]);var D=function(){setTimeout((function(){A(null)}),5e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)(m,{message:P}),Object(h.jsx)(p,{filter:C,change:function(e){console.log(e.target.value),S(e.target.value)}}),Object(h.jsx)("h2",{children:"Add new"}),Object(h.jsx)(x,{addPerson:function(e){e.preventDefault();var t={name:a,number:g,show:!0};if(n.some((function(e){return e.name===a}))){var c=n.find((function(e){return e.name===a})).id;console.log(c),window.confirm("".concat(a," is already in phonebook, Do you want to update number?"))&&b(c,t).then((function(e){o(n.map((function(t){return t.id!==c?t:e}))),A("".concat(a," yhteystieto p\xe4ivitetty")),D()})).catch((function(e){A("Yhteystieto '".concat(a,"' on jo poistettu")),o(n.filter((function(e){return e.id!==c}))),D()})),s(""),y("")}else d(t).then((function(e){o(n.concat(e))})),A("".concat(a," yhteystiedot lis\xe4tty")),D(),s(""),y("")},name:a,handleName:function(e){console.log(e.target.value),s(e.target.value)},number:g,handleNumber:function(e){console.log(e.target.value),y(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(v,{persons:n,filter:C,action:function(e){if(window.confirm("Haluatko varmasti poistaa yhteystiedon ".concat(e.name,"?"))){f(e.id).then((function(){return!0})).catch((function(t){A("Yhteystieto '".concat(e.name,"' on jo poistettu")),D()}));var t=e.id;o(n.filter((function(e){return e.id!==t}))),A("".concat(e.name," yhteystiedot poistettu")),D()}}})]})};r.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.e0b0d370.chunk.js.map